(()=>{var s,o,i,a,r,c,l,d,u,h,f,p,v,b,j,_,w,O,x,C,E,k,A,S,m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},m(e,t)};function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}c=function(){return c=Object.assign||function(t){for(var n,o,s=1,i=arguments.length;s<i;s++)for(o in n=arguments[s])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},c.apply(this,arguments)};function t(e,t,n,s){return new(n||(n=Promise))(function(o,i){function r(e){try{a(s.next(e))}catch(e){i(e)}}function c(e){try{a(s.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(e.value).then(r,c)}a((s=s.apply(e,t||[])).next())})}function n(e,t){var n,o,i,a,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break}if(6===r[0]&&s.label<n[1]){s.label=n[1],n=r;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break}n[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([a,r])}}}s=function(t){function n(e){var o,i,a,r,s=this;return(s=t.call(this,"ClientResponseError")||this).url="",s.status=0,s.data={},s.isAbort=!1,s.originalError=null,Object.setPrototypeOf(s,n.prototype),e instanceof n||(s.originalError=e),null!==e&&"object"==typeof e&&(s.url="string"==typeof e.url?e.url:"",s.status="number"==typeof e.status?e.status:0,s.data=null!==e.data&&"object"==typeof e.data?e.data:{}),"undefined"!=typeof DOMException&&e instanceof DOMException&&(s.isAbort=!0),s.name="ClientResponseError "+s.status,s.message=null===(o=s.data)||void 0===o?void 0:o.message,s.message||(s.isAbort?s.message="The request was autocancelled. More info you could find in https://github.com/pocketbase/js-sdk#auto-cancellation.":(null===(r=null===(a=null===(i=s.originalError)||void 0===i?void 0:i.cause)||void 0===a?void 0:a.message)||void 0===r?void 0:r.includes("ECONNREFUSED ::1"))?s.message="Failed to connect to the PocketBase server. Try replacing the SDK url from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":s.message="Something went wrong while processing your request."),s}return e(n,t),n.prototype.toJSON=function(){return c({},this)},n}(Error),a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function y(e,t,n){var o,i,r,s=Object.assign({},n||{}),c=s.encode||F;if(!a.test(e))throw new TypeError("argument name is invalid");if(i=c(t),i&&!a.test(i))throw new TypeError("argument val is invalid");if(o=e+"="+i,null!=s.maxAge){if(r=s.maxAge-0,isNaN(r)||!isFinite(r))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(r)}if(s.domain){if(!a.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain="+s.domain}if(s.path){if(!a.test(s.path))throw new TypeError("option path is invalid");o+="; Path="+s.path}if(s.expires){if(!function(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}(s.expires)||isNaN(s.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():s.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function M(e){return-1!==e.indexOf("%")?decodeURIComponent(e):e}function F(e){return encodeURIComponent(e)}function g(e){if(e)try{var t=decodeURIComponent(p(e.split(".")[1]).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)||{}}catch{}return{}}p="function"==typeof atob?atob:function(e){if(n=String(e).replace(/=+$/,""),n.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,s,o=0,a=0,i="";t=n.charAt(a++);~t&&(s=o%4?64*s+t:t,o++%4)?i+=String.fromCharCode(255&s>>(-2*o&6)):0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return i},i=function(){function e(e){void 0===e&&(e={}),this.load(e||{})}return e.prototype.load=function(e){for(t=0,n=Object.entries(e);t<n.length;t++){var t,n,s=n[t],o=s[0],i=s[1];this[o]=i}this.id=void 0!==e.id?e.id:"",this.created=void 0!==e.created?e.created:"",this.updated=void 0!==e.updated?e.updated:""},Object.defineProperty(e.prototype,"isNew",{get:function(){return!this.id},enumerable:!1,configurable:!0}),e.prototype.clone=function(){var e="function"==typeof structuredClone?structuredClone(this):JSON.parse(JSON.stringify(this));return new this.constructor(e)},e.prototype.export=function(){return Object.assign({},this)},e}(),r=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.load=function(e){t.prototype.load.call(this,e),this.collectionId="string"==typeof e.collectionId?e.collectionId:"",this.collectionName="string"==typeof e.collectionName?e.collectionName:"",this.loadExpand(e.expand)},n.prototype.loadExpand=function(e){for(var t in e=e||{},this.expand={},e)Array.isArray(e[t])?this.expand[t]=e[t].map(function(e){return new n(e||{})}):this.expand[t]=new n(e[t]||{})},n}(i),l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.load=function(e){t.prototype.load.call(this,e),this.avatar="number"==typeof e.avatar?e.avatar:0,this.email="string"==typeof e.email?e.email:""},n}(i),k=function(){function e(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}return Object.defineProperty(e.prototype,"token",{get:function(){return this.baseToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this.baseModel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isValid",{get:function(){return!function(t,n){void 0===n&&(n=0);var s=g(t);return!(Object.keys(s).length>0&&(!s.exp||s.exp-n>Date.now()/1e3))}(this.token)},enumerable:!1,configurable:!0}),e.prototype.save=function(e,t){this.baseToken=e||"",this.baseModel=null!==t&&"object"==typeof t?void 0!==t.collectionId?new r(t):new l(t):null,this.triggerChange()},e.prototype.clear=function(){this.baseToken="",this.baseModel=null,this.triggerChange()},e.prototype.loadFromCookie=function(e,t){void 0===t&&(t="pb_auth");var s=function(t,n){if(s={},"string"!=typeof t)return s;for(var s,i,a,r,c,l=Object.assign({},n||{}).decode||M,o=0;o<t.length;){if(i=t.indexOf("=",o),-1===i)break;if(a=t.indexOf(";",o),-1===a)a=t.length;else if(a<i){o=t.lastIndexOf(";",i-1)+1;continue}if(c=t.slice(o,i).trim(),void 0===s[c]){r=t.slice(i+1,a).trim(),34===r.charCodeAt(0)&&(r=r.slice(1,-1));try{s[c]=l(r)}catch{s[c]=r}}o=a+1}return s}(e||"")[t]||"",n={};try{(null===typeof(n=JSON.parse(s))||"object"!=typeof n||Array.isArray(n))&&(n={})}catch{}this.save(n.token||"",n.model||null)},e.prototype.exportToCookie=function(e,t){void 0===t&&(t="pb_auth"),s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},o=g(this.token),o?.exp?s.expires=new Date(1e3*o.exp):s.expires=new Date("1970-01-01"),e=Object.assign({},s,e);var s,o,a,c,l,n={token:this.token,model:(null===(a=this.model)||void 0===a?void 0:a.export())||null},i=y(t,JSON.stringify(n),e),d="undefined"!=typeof Blob?new Blob([i]).size:i.length;return n.model&&d>4096&&(n.model={id:null===(c=n?.model)||void 0===c?void 0:c.id,email:null===(l=n?.model)||void 0===l?void 0:l.email},this.model instanceof r&&(n.model.username=this.model.username,n.model.verified=this.model.verified,n.model.collectionId=this.model.collectionId),i=y(t,JSON.stringify(n),e)),i},e.prototype.onChange=function(e,t){var n=this;return void 0===t&&(t=!1),this._onChangeCallbacks.push(e),t&&e(this.token,this.model),function(){for(var t=n._onChangeCallbacks.length-1;t>=0;t--)if(n._onChangeCallbacks[t]==e)return delete n._onChangeCallbacks[t],void n._onChangeCallbacks.splice(t,1)}},e.prototype.triggerChange=function(){for(var t,e=0,n=this._onChangeCallbacks;e<n.length;e++)t=n[e],t&&t(this.token,this.model)},e}(),f=function(t){function n(e){void 0===e&&(e="pocketbase_auth");var n=t.call(this)||this;return n.storageFallback={},n.storageKey=e,n}return e(n,t),Object.defineProperty(n.prototype,"token",{get:function(){return(this._storageGet(this.storageKey)||{}).token||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){var t,e=this._storageGet(this.storageKey)||{};return null===e||"object"!=typeof e||null===e.model||"object"!=typeof e.model?null:void 0===(null===(t=e.model)||void 0===t?void 0:t.collectionId)?new l(e.model):new r(e.model)},enumerable:!1,configurable:!0}),n.prototype.save=function(e,n){this._storageSet(this.storageKey,{token:e,model:n}),t.prototype.save.call(this,e,n)},n.prototype.clear=function(){this._storageRemove(this.storageKey),t.prototype.clear.call(this)},n.prototype._storageGet=function(e){if("undefined"!=typeof window&&window?.localStorage){var t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]},n.prototype._storageSet=function(e,t){if("undefined"!=typeof window&&window?.localStorage){var n=t;"string"!=typeof t&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t},n.prototype._storageRemove=function(e){var t;"undefined"!=typeof window&&window?.localStorage&&(null===(t=window.localStorage)||void 0===t||t.removeItem(e)),delete this.storageFallback[e]},n}(k),o=function(t){this.client=t},b=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getAll=function(e){return void 0===e&&(e={}),this.client.send("/api/settings",{method:"GET",params:e}).then(function(e){return e||{}})},n.prototype.update=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),this.client.send("/api/settings",{method:"PATCH",params:t,body:e}).then(function(e){return e||{}})},n.prototype.testS3=function(e){return void 0===e&&(e={}),this.client.send("/api/settings/test/s3",{method:"POST",params:e}).then(function(){return!0})},n.prototype.testEmail=function(e,t,n){void 0===n&&(n={});var s={email:e,template:t};return this.client.send("/api/settings/test/email",{method:"POST",params:n,body:s}).then(function(){return!0})},n}(o),h=function(t,n,s,o,i){this.page=t>0?t:1,this.perPage=n>=0?n:0,this.totalItems=s>=0?s:0,this.totalPages=o>=0?o:0,this.items=i||[]},d=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getFullList=function(e,t){return void 0===e&&(e=200),void 0===t&&(t={}),this._getFullList(this.baseCrudPath,e,t)},n.prototype.getList=function(e,t,n){return void 0===e&&(e=1),void 0===t&&(t=30),void 0===n&&(n={}),this._getList(this.baseCrudPath,e,t,n)},n.prototype.getFirstListItem=function(e,t){return void 0===t&&(t={}),this._getFirstListItem(this.baseCrudPath,e,t)},n.prototype.getOne=function(e,t){return void 0===t&&(t={}),this._getOne(this.baseCrudPath,e,t)},n.prototype.create=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),this._create(this.baseCrudPath,e,t)},n.prototype.update=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this._update(this.baseCrudPath,e,t,n)},n.prototype.delete=function(e,t){return void 0===t&&(t={}),this._delete(this.baseCrudPath,e,t)},n}(function(o){function i(){return null!==o&&o.apply(this,arguments)||this}return e(i,o),i.prototype._getFullList=function(e,s,o){a=this,void 0===s&&(s=100),void 0===o&&(o={});var a,i=[],r=function(c){return t(a,void 0,void 0,function(){return n(this,function(){return[2,this._getList(e,c,s,o).then(function(e){var t=e,n=t.items,s=t.totalItems;return i=i.concat(n),n.length&&s>i.length?r(c+1):i})]})})};return r(1)},i.prototype._getList=function(e,t,n,s){var o=this;return void 0===t&&(t=1),void 0===n&&(n=30),void 0===s&&(s={}),s=Object.assign({page:t,perPage:n},s),this.client.send(e,{method:"GET",params:s}).then(function(e){if(t=[],e?.items){e.items=e.items||[];for(var t,i,n=0,s=e.items;n<s.length;n++)i=s[n],t.push(o.decode(i))}return new h(e?.page||1,e?.perPage||0,e?.totalItems||0,e?.totalPages||0,t)})},i.prototype._getOne=function(e,t,n){var s=this;return void 0===n&&(n={}),this.client.send(e+"/"+encodeURIComponent(t),{method:"GET",params:n}).then(function(e){return s.decode(e)})},i.prototype._getFirstListItem=function(e,t,n){return void 0===n&&(n={}),n=Object.assign({filter:t,$cancelKey:"one_by_filter_"+e+"_"+t},n),this._getList(e,1,1,n).then(function(e){var t;if(!(null===(t=e?.items)||void 0===t?void 0:t.length))throw new s({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return e.items[0]})},i.prototype._create=function(e,t,n){var s=this;return void 0===t&&(t={}),void 0===n&&(n={}),this.client.send(e,{method:"POST",params:n,body:t}).then(function(e){return s.decode(e)})},i.prototype._update=function(e,t,n,s){var o=this;return void 0===n&&(n={}),void 0===s&&(s={}),this.client.send(e+"/"+encodeURIComponent(t),{method:"PATCH",params:s,body:n}).then(function(e){return o.decode(e)})},i.prototype._delete=function(e,t,n){return void 0===n&&(n={}),this.client.send(e+"/"+encodeURIComponent(t),{method:"DELETE",params:n}).then(function(){return!0})},i}(o)),_=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.decode=function(e){return new l(e)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return"/api/admins"},enumerable:!1,configurable:!0}),n.prototype.update=function(e,n,s){var o=this;return void 0===n&&(n={}),void 0===s&&(s={}),t.prototype.update.call(this,e,n,s).then(function(e){var t,n;return o.client.authStore.model&&void 0===(null===(t=o.client.authStore.model)||void 0===t?void 0:t.collectionId)&&(null===(n=o.client.authStore.model)||void 0===n?void 0:n.id)===e?.id&&o.client.authStore.save(o.client.authStore.token,e),e})},n.prototype.delete=function(e,n){var s=this;return void 0===n&&(n={}),t.prototype.delete.call(this,e,n).then(function(t){var n,o;return t&&s.client.authStore.model&&void 0===(null===(n=s.client.authStore.model)||void 0===n?void 0:n.collectionId)&&(null===(o=s.client.authStore.model)||void 0===o?void 0:o.id)===e&&s.client.authStore.clear(),t})},n.prototype.authResponse=function(e){var t=this.decode(e?.admin||{});return e?.token&&e?.admin&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:e?.token||"",admin:t})},n.prototype.authWithPassword=function(e,t,n,s){return void 0===n&&(n={}),void 0===s&&(s={}),n=Object.assign({identity:e,password:t},n),this.client.send(this.baseCrudPath+"/auth-with-password",{method:"POST",params:s,body:n}).then(this.authResponse.bind(this))},n.prototype.authRefresh=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),this.client.send(this.baseCrudPath+"/auth-refresh",{method:"POST",params:t,body:e}).then(this.authResponse.bind(this))},n.prototype.requestPasswordReset=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),t=Object.assign({email:e},t),this.client.send(this.baseCrudPath+"/request-password-reset",{method:"POST",params:n,body:t}).then(function(){return!0})},n.prototype.confirmPasswordReset=function(e,t,n,s,o){return void 0===s&&(s={}),void 0===o&&(o={}),s=Object.assign({token:e,password:t,passwordConfirm:n},s),this.client.send(this.baseCrudPath+"/confirm-password-reset",{method:"POST",params:o,body:s}).then(function(){return!0})},n}(d),w=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.load=function(e){t.prototype.load.call(this,e),this.recordId="string"==typeof e.recordId?e.recordId:"",this.collectionId="string"==typeof e.collectionId?e.collectionId:"",this.provider="string"==typeof e.provider?e.provider:"",this.providerId="string"==typeof e.providerId?e.providerId:""},n}(i),O=function(s){function o(e,t){var n=s.call(this,e)||this;return n.collectionIdOrName=t,n}return e(o,s),o.prototype.decode=function(e){return new r(e)},Object.defineProperty(o.prototype,"baseCrudPath",{get:function(){return this.baseCollectionPath+"/records"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"baseCollectionPath",{get:function(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)},enumerable:!1,configurable:!0}),o.prototype.subscribeOne=function(e,s){return t(this,void 0,void 0,function(){return n(this,function(){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,s)]})})},o.prototype.subscribe=function(e,s){return t(this,void 0,void 0,function(){var t;return n(this,function(){if("function"==typeof e)return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName,e)];if(!s)throw new Error("Missing subscription callback.");if(""===e)throw new Error("Missing topic.");return t=this.collectionIdOrName,"*"!==e&&(t+="/"+e),[2,this.client.realtime.subscribe(t,s)]})})},o.prototype.unsubscribe=function(e){return t(this,void 0,void 0,function(){return n(this,function(){return"*"===e?[2,this.client.realtime.unsubscribe(this.collectionIdOrName)]:e?[2,this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e)]:[2,this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)]})})},o.prototype.getFullList=function(e,t){return void 0===e&&(e=200),void 0===t&&(t={}),s.prototype.getFullList.call(this,e,t)},o.prototype.getList=function(e,t,n){return void 0===e&&(e=1),void 0===t&&(t=30),void 0===n&&(n={}),s.prototype.getList.call(this,e,t,n)},o.prototype.getFirstListItem=function(e,t){return void 0===t&&(t={}),s.prototype.getFirstListItem.call(this,e,t)},o.prototype.getOne=function(e,t){return void 0===t&&(t={}),s.prototype.getOne.call(this,e,t)},o.prototype.create=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),s.prototype.create.call(this,e,t)},o.prototype.update=function(e,t,n){var o=this;return void 0===t&&(t={}),void 0===n&&(n={}),s.prototype.update.call(this,e,t,n).then(function(e){var t,n;return void 0!==(null===(t=o.client.authStore.model)||void 0===t?void 0:t.collectionId)&&(null===(n=o.client.authStore.model)||void 0===n?void 0:n.id)===e?.id&&o.client.authStore.save(o.client.authStore.token,e),e})},o.prototype.delete=function(e,t){var n=this;return void 0===t&&(t={}),s.prototype.delete.call(this,e,t).then(function(t){var s,o;return t&&void 0!==(null===(s=n.client.authStore.model)||void 0===s?void 0:s.collectionId)&&(null===(o=n.client.authStore.model)||void 0===o?void 0:o.id)===e&&n.client.authStore.clear(),t})},o.prototype.authResponse=function(e){var t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||"",record:t})},o.prototype.listAuthMethods=function(e){return void 0===e&&(e={}),this.client.send(this.baseCollectionPath+"/auth-methods",{method:"GET",params:e}).then(function(e){return Object.assign({},e,{usernamePassword:!!e?.usernamePassword,emailPassword:!!e?.emailPassword,authProviders:Array.isArray(e?.authProviders)?e?.authProviders:[]})})},o.prototype.authWithPassword=function(e,t,n,s){var o=this;return void 0===n&&(n={}),void 0===s&&(s={}),n=Object.assign({identity:e,password:t},n),this.client.send(this.baseCollectionPath+"/auth-with-password",{method:"POST",params:s,body:n}).then(function(e){return o.authResponse(e)})},o.prototype.authWithOAuth2=function(e,t,n,s,o,i,a){var r=this;return void 0===o&&(o={}),void 0===i&&(i={}),void 0===a&&(a={}),i=Object.assign({provider:e,code:t,codeVerifier:n,redirectUrl:s,createData:o},i),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",{method:"POST",params:a,body:i}).then(function(e){return r.authResponse(e)})},o.prototype.authRefresh=function(e,t){var n=this;return void 0===e&&(e={}),void 0===t&&(t={}),this.client.send(this.baseCollectionPath+"/auth-refresh",{method:"POST",params:t,body:e}).then(function(e){return n.authResponse(e)})},o.prototype.requestPasswordReset=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),t=Object.assign({email:e},t),this.client.send(this.baseCollectionPath+"/request-password-reset",{method:"POST",params:n,body:t}).then(function(){return!0})},o.prototype.confirmPasswordReset=function(e,t,n,s,o){return void 0===s&&(s={}),void 0===o&&(o={}),s=Object.assign({token:e,password:t,passwordConfirm:n},s),this.client.send(this.baseCollectionPath+"/confirm-password-reset",{method:"POST",params:o,body:s}).then(function(){return!0})},o.prototype.requestVerification=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),t=Object.assign({email:e},t),this.client.send(this.baseCollectionPath+"/request-verification",{method:"POST",params:n,body:t}).then(function(){return!0})},o.prototype.confirmVerification=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),t=Object.assign({token:e},t),this.client.send(this.baseCollectionPath+"/confirm-verification",{method:"POST",params:n,body:t}).then(function(){return!0})},o.prototype.requestEmailChange=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),t=Object.assign({newEmail:e},t),this.client.send(this.baseCollectionPath+"/request-email-change",{method:"POST",params:n,body:t}).then(function(){return!0})},o.prototype.confirmEmailChange=function(e,t,n,s){return void 0===n&&(n={}),void 0===s&&(s={}),n=Object.assign({token:e,password:t},n),this.client.send(this.baseCollectionPath+"/confirm-email-change",{method:"POST",params:s,body:n}).then(function(){return!0})},o.prototype.listExternalAuths=function(e,t){return void 0===t&&(t={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",{method:"GET",params:t}).then(function(e){if(t=[],Array.isArray(e))for(var t,o,n=0,s=e;n<s.length;n++)o=s[n],t.push(new w(o));return t})},o.prototype.unlinkExternalAuth=function(e,t,n){return void 0===n&&(n={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),{method:"DELETE",params:n}).then(function(){return!0})},o}(d),x=function(){function e(e){void 0===e&&(e={}),this.load(e||{})}return e.prototype.load=function(e){this.id=void 0!==e.id?e.id:"",this.name=void 0!==e.name?e.name:"",this.type=void 0!==e.type?e.type:"text",this.system=!!e.system,this.required=!!e.required,this.unique=!!e.unique,this.options="object"==typeof e.options&&null!==e.options?e.options:{}},e}(),C=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.load=function(e){t.prototype.load.call(this,e),this.system=!!e.system,this.name="string"==typeof e.name?e.name:"",this.type="string"==typeof e.type?e.type:"base",this.options=void 0!==e.options?e.options:{},this.listRule="string"==typeof e.listRule?e.listRule:null,this.viewRule="string"==typeof e.viewRule?e.viewRule:null,this.createRule="string"==typeof e.createRule?e.createRule:null,this.updateRule="string"==typeof e.updateRule?e.updateRule:null,this.deleteRule="string"==typeof e.deleteRule?e.deleteRule:null,e.schema=Array.isArray(e.schema)?e.schema:[],this.schema=[];for(var o,n=0,s=e.schema;n<s.length;n++)o=s[n],this.schema.push(new x(o))},Object.defineProperty(n.prototype,"isBase",{get:function(){return"base"===this.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAuth",{get:function(){return"auth"===this.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSingle",{get:function(){return"single"===this.type},enumerable:!1,configurable:!0}),n}(i),E=function(s){function o(){return null!==s&&s.apply(this,arguments)||this}return e(o,s),o.prototype.decode=function(e){return new C(e)},Object.defineProperty(o.prototype,"baseCrudPath",{get:function(){return"/api/collections"},enumerable:!1,configurable:!0}),o.prototype.import=function(e,s,o){return void 0===s&&(s=!1),void 0===o&&(o={}),t(this,void 0,void 0,function(){return n(this,function(){return[2,this.client.send(this.baseCrudPath+"/import",{method:"PUT",params:o,body:{collections:e,deleteMissing:s}}).then(function(){return!0})]})})},o}(d),u=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.load=function(e){t.prototype.load.call(this,e),e.remoteIp=e.remoteIp||e.ip,this.url="string"==typeof e.url?e.url:"",this.method="string"==typeof e.method?e.method:"GET",this.status="number"==typeof e.status?e.status:200,this.auth="string"==typeof e.auth?e.auth:"guest",this.remoteIp="string"==typeof e.remoteIp?e.remoteIp:"",this.userIp="string"==typeof e.userIp?e.userIp:"",this.referer="string"==typeof e.referer?e.referer:"",this.userAgent="string"==typeof e.userAgent?e.userAgent:"",this.meta="object"==typeof e.meta&&null!==e.meta?e.meta:{}},n}(i),A=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getRequestsList=function(e,t,n){return void 0===e&&(e=1),void 0===t&&(t=30),void 0===n&&(n={}),n=Object.assign({page:e,perPage:t},n),this.client.send("/api/logs/requests",{method:"GET",params:n}).then(function(e){if(t=[],e?.items){e.items=e?.items||[];for(var t,o,n=0,s=e.items;n<s.length;n++)o=s[n],t.push(new u(o))}return new h(e?.page||1,e?.perPage||0,e?.totalItems||0,e?.totalPages||0,t)})},n.prototype.getRequest=function(e,t){return void 0===t&&(t={}),this.client.send("/api/logs/requests/"+encodeURIComponent(e),{method:"GET",params:t}).then(function(e){return new u(e)})},n.prototype.getRequestsStats=function(e){return void 0===e&&(e={}),this.client.send("/api/logs/requests/stats",{method:"GET",params:e}).then(function(e){return e})},n}(o),S=function(o){function i(){var e=null!==o&&o.apply(this,arguments)||this;return e.clientId="",e.eventSource=null,e.subscriptions={},e.lastSentTopics=[],e.maxConnectTimeout=15e3,e.reconnectAttempts=0,e.maxReconnectAttempts=1/0,e.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],e.pendingConnects=[],e}return e(i,o),Object.defineProperty(i.prototype,"isConnected",{get:function(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length},enumerable:!1,configurable:!0}),i.prototype.subscribe=function(e,s){var o;return t(this,void 0,void 0,function(){var i,a=this;return n(this,function(r){switch(r.label){case 0:if(!e)throw new Error("topic must be set.");return i=function(e){var t,n=e;try{t=JSON.parse(n?.data)}catch{}s(t||{})},this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(i),this.isConnected?[3,2]:[4,this.connect()];case 1:return r.sent(),[3,5];case 2:return 1!==this.subscriptions[e].length?[3,4]:[4,this.submitSubscriptions()];case 3:return r.sent(),[3,5];case 4:null===(o=this.eventSource)||void 0===o||o.addEventListener(e,i),r.label=5;case 5:return[2,function(){return t(a,void 0,void 0,function(){return n(this,function(){return[2,this.unsubscribeByTopicAndListener(e,i)]})})}]}})})},i.prototype.unsubscribe=function(e){var s;return t(this,void 0,void 0,function(){var t,o,i;return n(this,function(n){switch(n.label){case 0:if(!this.hasSubscriptionListeners(e))return[2];if(e){for(t=0,o=this.subscriptions[e];t<o.length;t++)i=o[t],null===(s=this.eventSource)||void 0===s||s.removeEventListener(e,i);delete this.subscriptions[e]}else this.subscriptions={};return this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3]);case 1:return this.hasSubscriptionListeners(e)?[3,3]:[4,this.submitSubscriptions()];case 2:n.sent(),n.label=3;case 3:return[2]}})})},i.prototype.unsubscribeByPrefix=function(e){var s;return t(this,void 0,void 0,function(){var t,o,i,a,r;return n(this,function(n){switch(n.label){case 0:for(t in i=!1,this.subscriptions)if(t.startsWith(e)){for(i=!0,o=0,a=this.subscriptions[t];o<a.length;o++)r=a[o],null===(s=this.eventSource)||void 0===s||s.removeEventListener(t,r);delete this.subscriptions[t]}return i?this.hasSubscriptionListeners()?[4,this.submitSubscriptions()]:[3,2]:[2];case 1:return n.sent(),[3,3];case 2:this.disconnect(),n.label=3;case 3:return[2]}})})},i.prototype.unsubscribeByTopicAndListener=function(e,s){var o;return t(this,void 0,void 0,function(){var t,i;return n(this,function(n){switch(n.label){case 0:if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return[2];for(i=!1,t=this.subscriptions[e].length-1;t>=0;t--)this.subscriptions[e][t]===s&&(i=!0,delete this.subscriptions[e][t],this.subscriptions[e].splice(t,1),null===(o=this.eventSource)||void 0===o||o.removeEventListener(e,s));return i?(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3])):[2];case 1:return this.hasSubscriptionListeners(e)?[3,3]:[4,this.submitSubscriptions()];case 2:n.sent(),n.label=3;case 3:return[2]}})})},i.prototype.hasSubscriptionListeners=function(e){var t,n,s;if(this.subscriptions=this.subscriptions||{},e)return!!(null===(t=this.subscriptions[e])||void 0===t?void 0:t.length);for(s in this.subscriptions)if(null===(n=this.subscriptions[s])||void 0===n?void 0:n.length)return!0;return!1},i.prototype.submitSubscriptions=function(){return t(this,void 0,void 0,function(){return n(this,function(){return this.clientId?(this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),[2,this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},params:{$cancelKey:"realtime_"+this.clientId}}).catch(function(e){if(!e?.isAbort)throw e})]):[2]})})},i.prototype.getNonEmptySubscriptionTopics=function(){var t,e=[];for(t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e},i.prototype.addAllSubscriptionListeners=function(){if(this.eventSource)for(t in this.removeAllSubscriptionListeners(),this.subscriptions)for(var t,s,e=0,n=this.subscriptions[t];e<n.length;e++)s=n[e],this.eventSource.addEventListener(t,s)},i.prototype.removeAllSubscriptionListeners=function(){if(this.eventSource)for(t in this.subscriptions)for(var t,s,e=0,n=this.subscriptions[t];e<n.length;e++)s=n[e],this.eventSource.removeEventListener(t,s)},i.prototype.connect=function(){return t(this,void 0,void 0,function(){var e=this;return n(this,function(){return this.reconnectAttempts>0?[2]:[2,new Promise(function(t,n){e.pendingConnects.push({resolve:t,reject:n}),e.pendingConnects.length>1||e.initConnect()})]})})},i.prototype.initConnect=function(){var e=this;this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(function(){e.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=function(){e.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",function(s){var o=s;e.clientId=o?.lastEventId,e.submitSubscriptions().then(function(){return t(e,void 0,void 0,function(){var e;return n(this,function(t){switch(t.label){case 0:e=3,t.label=1;case 1:return this.hasUnsentSubscriptions()&&e>0?(e--,[4,this.submitSubscriptions()]):[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}})})}).then(function(){for(var t=0,n=e.pendingConnects;t<n.length;t++)n[t].resolve();e.pendingConnects=[],e.reconnectAttempts=0,clearTimeout(e.reconnectTimeoutId),clearTimeout(e.connectTimeoutId)}).catch(function(t){e.clientId="",e.connectErrorHandler(t)})})},i.prototype.hasUnsentSubscriptions=function(){if(e=this.getNonEmptySubscriptionTopics(),e.length!=this.lastSentTopics.length)return!0;for(var e,s,t=0,n=e;t<n.length;t++)if(s=n[t],!this.lastSentTopics.includes(s))return!0;return!1},i.prototype.connectErrorHandler=function(e){if(n=this,clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(var n,i,t=0,o=this.pendingConnects;t<o.length;t++)o[t].reject(new s(e));this.disconnect()}else this.disconnect(!0),i=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1],this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(function(){n.initConnect()},i)},i.prototype.disconnect=function(e){if(void 0===e&&(e=!1),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),null===(t=this.eventSource)||void 0===t||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(var t,i=new s(new Error("Realtime disconnected.")),n=0,o=this.pendingConnects;n<o.length;n++)o[n].reject(i);this.pendingConnects=[]}},i}(o),j=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.check=function(e){return void 0===e&&(e={}),this.client.send("/api/health",{method:"GET",params:e})},n}(o),v=function(){function e(e,t,n){void 0===e&&(e="/"),void 0===n&&(n="en-US"),this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new f,this.admins=new _(this),this.collections=new E(this),this.logs=new A(this),this.settings=new b(this),this.realtime=new S(this),this.health=new j(this)}return e.prototype.collection=function(e){return this.recordServices[e]||(this.recordServices[e]=new O(this,e)),this.recordServices[e]},e.prototype.autoCancellation=function(e){return this.enableAutoCancellation=!!e,this},e.prototype.cancelRequest=function(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this},e.prototype.cancelAllRequests=function(){for(var e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this},e.prototype.send=function(e,o){var i,a,r,c,l,d,u,h;return t(this,void 0,void 0,function(){var m,f,p,g,v,b=this;return n(this,function(){return(m=Object.assign({method:"GET"},o)).body&&"FormData"!==m.body.constructor.name&&("string"!=typeof m.body&&(m.body=JSON.stringify(m.body)),void 0===(null===(i=m?.headers)||void 0===i?void 0:i["Content-Type"])&&(m.headers=Object.assign({},m.headers,{"Content-Type":"application/json"}))),void 0===(null===(a=m?.headers)||void 0===a?void 0:a["Accept-Language"])&&(m.headers=Object.assign({},m.headers,{"Accept-Language":this.lang})),(null===(r=this.authStore)||void 0===r?void 0:r.token)&&void 0===(null===(c=m?.headers)||void 0===c?void 0:c.Authorization)&&(m.headers=Object.assign({},m.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&!1!==(null===(l=m.params)||void 0===l?void 0:l.$autoCancel)&&(p=(null===(d=m.params)||void 0===d?void 0:d.$cancelKey)||(m.method||"GET")+e,this.cancelRequest(p),g=new AbortController,this.cancelControllers[p]=g,m.signal=g.signal),null===(u=m.params)||void 0===u||delete u.$autoCancel,null===(h=m.params)||void 0===h||delete h.$cancelKey,f=this.buildUrl(e),void 0!==m.params&&((v=this.serializeQueryParams(m.params))&&(f+=(f.includes("?")?"&":"?")+v),delete m.params),this.beforeSend&&(m=Object.assign({},this.beforeSend(f,m))),[2,fetch(f,m).then(function(e){return t(b,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:t={},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.json()];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:if(this.afterSend&&(t=this.afterSend(e,t)),e.status>=400)throw new s({url:e.url,status:e.status,data:t});return[2,t]}})})}).catch(function(e){throw new s(e)})]})})},e.prototype.getFileUrl=function(e,t,n){void 0===n&&(n={});var o,i,s=[];return s.push("api"),s.push("files"),s.push(encodeURIComponent(e.collectionId||e.collectionName)),s.push(encodeURIComponent(e.id)),s.push(encodeURIComponent(t)),o=this.buildUrl(s.join("/")),Object.keys(n).length&&(i=new URLSearchParams(n),o+=(o.includes("?")?"&":"?")+i),o},e.prototype.buildUrl=function(e){var t=this.baseUrl+(this.baseUrl.endsWith("/")?"":"/");return e&&(t+=e.startsWith("/")?e.substring(1):e),t},e.prototype.serializeQueryParams=function(e){n=[];for(i in e)if(null!==e[i]){var n,o,i,a,r,t=e[i],s=encodeURIComponent(i);if(Array.isArray(t))for(o=0,a=t;o<a.length;o++)r=a[o],n.push(s+"="+encodeURIComponent(r));else t instanceof Date?n.push(s+"="+encodeURIComponent(t.toISOString())):null!==typeof t&&"object"==typeof t?n.push(s+"="+encodeURIComponent(JSON.stringify(t))):n.push(s+"="+encodeURIComponent(t))}return n.join("&")},e}(),document.getElementById("email-submit").onclick=async function(){const e=new v("https://nutriplan.fly.dev"),t=document.getElementById("email-name-submit-input").value,n=document.getElementById("email-submit-input").value,s={email:n,name:t};try{const t=await e.collection("email_list").create(s);document.getElementById("email-signup-box").innerHTML="<h3>Thank you for signing up!</h3>"}catch{alert("Error: Please ensure that all required fields are completed and a valid email address is provided.")}}})()